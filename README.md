# תיקון זמנית - 1.1.2025

## 🔧 מה תוקן

### 1. ✅ חדש: שמירת זמן בהשהיית טיימר!
כשעוצרים באמצע בגלל הפרעה - **הזמן נשמר אוטומטית**:
- לחיצה על "השהה" → שומר את הדקות שעבדת
- מעבר למשימה אחרת → שומר אוטומטית
- סגירת הדף → שומר אוטומטית
- רענון → שומר אוטומטית

### 2. ✅ חדש: שמירת הפרעות ב-DB לניתוח!
- הפרעות נשמרות ב-Supabase (לא רק localStorage)
- סוג ההפרעה, זמן, ומשימה שהופסקה
- דוח ניתוח הפרעות מהדשבורד
- סטטיסטיקות: סה"כ, לפי סוג, ממוצע

### 3. הוספת משימות מהדשבורד - תכנון שבועי
- כפתור "הוסף עבודה חדשה" פותח טופס מלא
- **בורר ימים שבועי** - לחיצה על יום פותחת טופס עם התאריך הנבחר
- מאפשר תכנון שבועי ישירות מהדשבורד

### 4. דיאלוג בחירת שיבוץ למשימות ארוכות

### 5. תיקון שגיאת הגדרות (409 Conflict)

### 6. תיקון עדכון ימי עבודה

### 7. תיקון שיבוץ משימות שלא נכנסות

### 8. תיקון "משוך להיום" / "העבר למחר"

---

## 📦 קבצים בחבילה

```
sql/
└── create_interruptions_table.sql  ← ✅ חדש! טבלה ב-Supabase

src/
├── components/
│   ├── Admin/
│   │   └── AdminSettings.jsx
│   ├── Dashboard/
│   │   ├── Dashboard.jsx           ← תכנון שבועי + ניתוח הפרעות
│   │   └── InterruptionsTracker.jsx ← ✅ חדש! שמירה ב-DB
│   ├── DailyView/
│   │   └── SimpleTaskForm.jsx
│   └── Tasks/
│       ├── TaskTimer.jsx           ← שמירה בהשהייה
│       └── TaskTimerWithInterruptions.jsx
├── config/
│   └── appConfig.js
├── services/
│   └── taskIntervals.js
└── utils/
    ├── autoRescheduleDaily.js
    └── smartScheduler.js
```

---

## 📋 התקנה

### שלב 1: יצירת טבלה ב-Supabase
1. לך ל-Supabase → SQL Editor
2. העתק את התוכן של `sql/create_interruptions_table.sql`
3. הרץ את הקוד

### שלב 2: עדכון הקוד
1. העתיקי את תיקיית `src/` לפרויקט
2. רענני עם `Ctrl+Shift+R`

---

## ⏸️ ניתוח הפרעות

### סוגי הפרעות שנשמרים:
| סוג | אייקון |
|-----|--------|
| שיחת לקוח | 📞 |
| שיחת טלפון אחרת | 📱 |
| פגישה לא מתוכננת | 👥 |
| הסחת דעת | 🎯 |
| הפסקה | ☕ |
| בעיה טכנית | 🔧 |
| משימה דחופה | 🚨 |
| אחר | ❓ |

### מה נשמר:
- סוג ההפרעה
- זמן (שניות)
- שעת התחלה/סיום
- שם המשימה שהופסקה
- הערות

### איפה רואים את הניתוח:
דשבורד → **⏸️ ניתוח הפרעות**

---

## ⏱️ איך הטיימר עובד עכשיו:

| פעולה | מה קורה |
|-------|---------|
| ⏸️ השהה | **שומר את הזמן** + הודעה "X דקות נשמרו" |
| ⏹️ עצור | שומר + מאפס |
| 🔄 מעבר למשימה אחרת | שומר אוטומטית |
| ❌ סגירת דף | שומר אוטומטית |
| 🔃 רענון | משחזר + שומר |

**הערה:** אם עבדת פחות מדקה, לא נשמר (אבל תראי הודעה)
