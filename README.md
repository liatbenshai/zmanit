# עדכון זמנית - 31/12/2024 (גרסה 7)

## 🐛 באגים שתוקנו

### 1. ספירה כפולה של משימות עם אינטרוולים ✅ תוקן עכשיו!
**הבעיה:** כש"שחף" (50 דק') מחולקת לאינטרוולים, המערכת סופרת:
- שחף (אב) = 50 דק'
- שחף 1/2 = 25 דק'  
- שחף 2/2 = 25 דק'
- **סה"כ נספר: 100 דק' במקום 50!**

**הפתרון:**
- סינון משימות "הורה" שיש להן ילדים (אינטרוולים)
- סופרים רק את האינטרוולים עצמם, לא את ההורה

### 2. התראות על משימה פעילה ✅
לא שולחים התראות "הגיע הזמן להתחיל" למשימה שכבר עובדים עליה

### 3. התראות לפי לו"ז דינמי ✅
ההתראות מבוססות על הזמן המחושב, לא על הזמן המקורי

### 4. שאר התיקונים
- סדר בלוקים של פרויקטים (blockIndex)
- כפל זמן בעריכה
- התראות על משימות שהושלמו
- התראות על פרויקטים גדולים

---

## ✨ סוגי התראות

| התראה | מתי | דוגמה |
|--------|------|--------|
| ⏰ לפני | 5 דק' לפני התחלה | "מתחיל בעוד 5 דקות (10:30)" |
| 🔔 בזמן | בדיוק כשהגיע הזמן | "הגיע הזמן להתחיל! (30 דק')" |
| ⏳ סיום קרב | 5 דק' לפני סוף | "נשארו 5 דקות לסיום!" |
| ⏳ לפי לו"ז | כשהמשימה אמורה להסתיים | "המשימה אמורה להסתיים ב-11:00" |
| 🔔 הזמן נגמר | כשעבר הזמן המוקצב | "הזמן המוקצב הסתיים" |
| ⚠️ חריגה | כל 10 דק' בחריגה | "חרגת ב-15 דקות מהזמן" |
| ⏰ איחור | 1-30 דק' באיחור | "היית אמור להתחיל לפני 10 דקות" |

---

## 📦 קבצים לעדכון (9 קבצים)

```
src/
├── components/
│   ├── Analytics/
│   │   ├── DailySummary.jsx       
│   │   └── WeeklyReview.jsx       
│   ├── DailyView/
│   │   ├── DailyView.jsx          
│   │   └── SimpleTaskForm.jsx     
│   ├── Dashboard/
│   │   └── SmartDashboard.jsx     
│   ├── Notifications/
│   │   └── NotificationChecker.jsx ← התראות דינמיות!
│   └── Tasks/
│       └── TaskTimerWithInterruptions.jsx 
└── utils/
    ├── autoRescheduleDaily.js     
    └── taskOrder.js               
```

---

## 🔧 התקנה

1. חלצי את ה-ZIP
2. גררי את תיקיית `src/` לתוך הפרויקט
3. Refresh (Ctrl+Shift+R)

---

## 💡 איך זה עובד

כשמשימה נדחית (כי עבדת יותר זמן על הקודמת), הלו"ז מחושב מחדש:

**מקור:** 
```
09:00 - משימה א (30 דק')
09:30 - משימה ב (30 דק')
10:00 - משימה ג (30 דק')
```

**אם עבדת על א' עד 09:45:**
```
09:45 - משימה ב (30 דק')  ← התראה תגיע ב-09:40!
10:20 - משימה ג (30 דק')  ← התראה תגיע ב-10:15!
```

ההתראות עוקבות אחרי הלו"ז הדינמי!
