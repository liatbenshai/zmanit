# תיקון זמנית - 1.1.2025

## 🔧 מה תוקן

### 1. דיאלוג בחירת שיבוץ למשימות ארוכות
כשיוצרים משימה שמתחלקת ליותר מבלוק אחד, נפתח דיאלוג ששואל:
- כמה בלוקים לשבץ להיום
- מציג זמן פנוי היום
- מאפשר בחירה ידנית

### 2. תיקון שגיאת הגדרות (409 Conflict)
שגיאת `duplicate key value violates unique constraint` תוקנה

### 3. תיקון עדכון ימי עבודה
ימי העבודה נשמרים כראוי כמערך

### 4. תיקון שיבוץ משימות שלא נכנסות
משימות שלא נכנסות בשלמותן לחלון זמן פנוי - עכשיו משובצות לפי מה שנכנס

### 5. ✅ חדש: תיקון "משוך להיום" / "העבר למחר"
משימות שמועברות בין ימים שומרות את כל הנתונים שלהן:
- סוג העבודה (task_type)
- אורך המשימה (estimated_duration)
- עדיפות (priority)
- הערות (description)

---

## 📦 קבצים בחבילה

```
src/
├── components/
│   ├── Admin/
│   │   └── AdminSettings.jsx     ← תיקון workDays
│   └── DailyView/
│       └── SimpleTaskForm.jsx    ← דיאלוג בחירת שיבוץ
├── config/
│   └── appConfig.js              ← תיקון upsert 409
├── services/
│   └── taskIntervals.js          ← תמיכה ב-blocksForToday
└── utils/
    ├── autoRescheduleDaily.js    ← תיקון שמירת נתונים בהעברה
    └── smartScheduler.js         ← תיקון שיבוץ חלקי
```

---

## 📋 התקנה

1. העתיקי את תיקיית `src/` לפרויקט
2. רענני עם `Ctrl+Shift+R`

---

## 🎯 איך זה עובד עכשיו

### יצירת משימה ארוכה (יותר מ-45 דקות):

1. ממלאים את הטופס כרגיל
2. לוחצים "הוסף משימה"
3. **דיאלוג חדש נפתח** עם:
   - סה"כ בלוקים
   - זמן פנוי היום
   - סליידר לבחירת כמה להיום
   - כפתורי בחירה מהירה: "הכל למחר", "2 להיום", "מקסימום"
4. לוחצים "צור משימה"

### התוצאה:
- הבלוקים שבחרת משובצים להיום
- השאר משובצים לימים הבאים
- כל הבלוקים ממוספרים: `(1/14)`, `(2/14)` וכו'

---

## ⚠️ הערות

- "בחירה ידנית" כבר קיימת בהודעת "לא יספיק"
- משימות שהועברו למחר נשארות שם
- עדיפות: דחוף → בינוני → רגיל
